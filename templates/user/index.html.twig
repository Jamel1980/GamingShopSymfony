{% extends 'base.html.twig' %}

{% block title %}User index
{% endblock %}

{% block body %}


<table class="table">
    <div class="d-flex justify-content-around m-2">
        <a href="javascript:add()" class="btn btn-sm btn-success">Ajouter</a>
        <a href="javascript:show()" class="btn btn-sm btn-primary">Afficher</a>
        <a href="javascript:modify()" class="btn btn-sm btn-secondary">Modifier</a>

    </div>
    <h1 class="text-center">User index</h1>
    <thead>
        <tr>
            <th></th>
            <th>id</th>
            <th>Email</th>
            <th>Roles</th>
            <th>Password</th>
        </tr>
    </thead>
    <tbody>
        {% for user in users %}
        <tr>
            <td><input type="checkbox" class="form-check-input" name="check" id="{{user.id}}" value="{{user.id}}"
                    onclick="onlyOne(this)"></td>
            <td>{{user.id}}</td>
            <td>{{ user.email }}</td>
            <td>{{ user.roles ? user.roles|json_encode : '' }}</td>
            <td>****</td>
        </tr>
        {% else %}
        <tr>
            <td colspan="5">no records found</td>
        </tr>
        {% endfor %}
    </tbody>
</table>


{% block script %}
<script>
    const modify = () => {
        let id = getIdChecked('check');
        if (id == 0) {
            alert("Please select Client to modify");
        } else {
            let url = "{{path('app_user_edit',{'id':'id'})}}"
            url = url.replace('id', id);
            document.location.href = url;
        }
    }
    const add = () => {
        document.location.href = "{{path('app_user_new')}}";
    }

    const show = () => {
        let id = getIdChecked('check');
        if (id == 0) {
            alert("Choisir ligne");
        } else {
            let url = "{{ path('app_user_show', {'id': 'id'}) }}";
            url = url.replace('id', id);
            window.location.href = url;
        }
    }


</script>
{% endblock %}
{% endblock %}